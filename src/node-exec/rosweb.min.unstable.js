var b=require("./roslibjs/src/RosLibNode.js"),c=new (require("events").e),f=require("fs"),g=[],h,k=[];f.d("../config/rostopic.txt",function(a,e){g=e.toString().split("\n");h=e.toString().split("\n").length-1;console.log("reading../config/rostopic.txt");for(var d=0;d<h;d++)console.log(g[d])});f.d("../config/rostype.txt",function(a,e){k=e.toString().split("\n");console.log("reading../config/rostype.txt");for(var d=0;d<h;d++)console.log(k[d])});for(var l=Array(h),m=Array(h),n=0;n<h;n++)m[n]=new b.f;
var p=new b.g({url:"ws://localhost:9090"});
p.a("connection",function(){console.log("Connected to websocket server.");c.a("subscribe",function(){for(var a=0;a<h;a++)l[a].l(function(e){m[a]=e;console.log("subscribing "+l[a]);console.log("publishing "+l[a]);l[a].m()}),l[a].j(m[a]);c.b("finished publishing and subscribing");c.b("done")});c.a("create topic",function(){for(var a=0;a<h;a++)l[a]=new b.h({k:p,name:g[a],i:k[a]});console.log("created topic")});(function(a){c.a("done",a);process.c(function(){c.b("create topic");process.c(function(){c.b("subscribe")})})})(function(){console.log("finished callback")})});
p.a("error",function(a){console.log("Error connecting to websocket server: ",a)});p.a("close",function(){console.log("Connection to websocket server closed.")});
